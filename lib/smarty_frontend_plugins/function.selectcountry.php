<?php
/** Creates select-field for countries
  * Params:
  *   fieldname: The name of the select field
  *   selected: selected country (code)
  *   preset: Add this country as first entry
  *   lg: language to use, template value used unless specified. WARNING: Only de, fr are translated, english for the rest. 
  *
  */
function smarty_function_selectcountry($params, &$smarty) {
    require_once $smarty->_get_plugin_filepath('function','html_options');
    
    $selected = strtoupper(get($params, 'selected'));
    $lg = get($params, 'lg', $smarty->get_template_vars('lg'));
    
    if ($lg == 'de') {
        $country_codes = array (
                'AL' => 'Albanien',
                'DZ' => 'Algerien',
                'AS' => 'American samoa',
                'AD' => 'Andorra',
                'AO' => 'Angola',
                'AI' => 'Anguilla',
                'AQ' => 'Antarctica',
                'AG' => 'Antigua und barbuda',
                'AR' => 'Argentinien',
                'AM' => 'Armenien',
                'AW' => 'Aruba',
                'AZ' => 'Aserbaidschan',
                'ET' => 'Äthiopien',
                'AU' => 'Australien',
                'AZ' => 'Azerbaijan',
                'BS' => 'Bahamas',
                'BH' => 'Bahrain',
                'BD' => 'Bangladesh',
                'BB' => 'Barbados',
                'BY' => 'Belarus',
                'BE' => 'Belgien',
                'BZ' => 'Belize',
                'BJ' => 'Benin',
                'BM' => 'Bermuda',
                'BT' => 'Bhutan',
                'BO' => 'Bolivien',
                'BA' => 'Bosnien und Herzegovina',
                'BW' => 'Botsuana',
                'BV' => 'Bouvet island',
                'BR' => 'Brasilien',
                'VG' => 'Britische Jungferninseln',
                'BN' => 'Brunei',
                'BG' => 'Bulgarien',
                'BF' => 'Burkina faso',
                'BI' => 'Burundi',
                'KY' => 'Cayman islands',
                'CL' => 'Chile',
                'CN' => 'China',
                'CX' => 'Christmas island',
                'CK' => 'Cook-Inseln',
                'CR' => 'Costa rica',
                'DK' => 'Dänemark',
                'DE' => 'Deutschland',
                'DJ' => 'Djibouti',
                'DM' => 'Dominica',
                'DO' => 'Dominican republic',
                'TP' => 'East timor',
                'EC' => 'Ecuador',
                'EG' => 'Egypt',
                'SV' => 'El salvador',
                'GQ' => 'Equatorial guinea',
                'ER' => 'Eritrea',
                'EE' => 'Estland',
                'ET' => 'Ethiopia',
                'FK' => 'Falklandinseln',
                'FO' => 'Färöer Inseln',
                'FJ' => 'Fidschi',
                'FI' => 'Finnland',
                'FR' => 'Frankreich',
                'GF' => 'Französisch-Guyana',
                'PF' => 'Französisch-Polynesien',
                'GA' => 'Gabun',
                'GD' => 'Grenada',
                'GR' => 'Griechenland',
                'GL' => 'Grönland',
                'GB' => 'Großbritannien',
                'GP' => 'Guadeloupe',
                'GU' => 'Guam',
                'GT' => 'Guatemala',
                'GN' => 'Guinea',
                'GW' => 'Guinea-Bissau',
                'GY' => 'Guyana',
                'HT' => 'Haiti',
                'HM' => 'Heard island and mcdonald islands',
                'VA' => 'Holy see (vatican city state)',
                'HN' => 'Honduras',
                'HK' => 'Hong kong',
                'IN' => 'Indien',
                'ID' => 'Indonesien',
                'IE' => 'Irland',
                'IS' => 'Island',
                'IL' => 'Israel',
                'IT' => 'Italien',
                'JM' => 'Jamaika',
                'JP' => 'Japan',
                'YE' => 'Jemen',
                'JO' => 'Jordanien',
                'KH' => 'Kambodscha',
                'CA' => 'Kanada',
                'CV' => 'Kap Verde',
                'KZ' => 'Kasachstan',
                'QA' => 'Katar',
                'KE' => 'Kenia',
                'KG' => 'Kirgisistan',
                'KI' => 'Kiribati',
                'CO' => 'Kolumbien',
                'KW' => 'Kuwait',
                'LA' => 'Laos',
                'LS' => 'Lesotho',
                'LV' => 'Lettland',
                'LI' => 'Liechtenstein',
                'LT' => 'Litauen',
                'LU' => 'Luxemburg',
                'MO' => 'Macau',
                'MG' => 'Madagaskar',
                'MW' => 'Malawi',
                'MY' => 'Malaysia',
                'MV' => 'Maldiven',
                'ML' => 'Mali',
                'MT' => 'Malta',
                'MA' => 'Marokko',
                'MH' => 'Marshall-Inseln',
                'MQ' => 'Martinique',
                'MR' => 'Mauritanien',
                'MU' => 'Mauritius',
                'YT' => 'Mayotte',
                'MX' => 'Mexico',
                'MN' => 'Mongolei',
                'MS' => 'Montserrat',
                'MZ' => 'Mosambik',
                'NR' => 'Nauru',
                'NP' => 'Nepal',
                'NC' => 'Neukaledonien',
                'NZ' => 'Neuseeland',
                'NL' => 'Niderlande',
                'AN' => 'Niederländische Antillen',
                'NE' => 'Niger',
                'NU' => 'Niue',
                'NF' => 'Norfolk-Inseln',
                'NO' => 'Norwegen',
                'OM' => 'Oman',
                'AT' => 'Österreich',
                'PW' => 'Palau',
                'PA' => 'Panama',
                'PG' => 'Papua-Neuguinea',
                'PY' => 'Paraguay',
                'PE' => 'Peru',
                'PH' => 'Philippinen',
                'PN' => 'Pitcairninseln',
                'PL' => 'Polen',
                'PT' => 'Portugal',
                'CG' => 'Republik Kongo',
                'RE' => 'Reunion',
                'RO' => 'Rumänien',
                'RU' => 'Russland',
                'SB' => 'Salomonen',
                'ZM' => 'Sambia',
                'WS' => 'Samoa',
                'SM' => 'San marino',
                'ST' => 'São Tomé und Príncipe',
                'SA' => 'Saudi-Arabien',
                'SE' => 'Schweden',
                'CH' => 'Schweiz',
                'SN' => 'Senegal',
                'SC' => 'Seychellen',
                'SL' => 'Sierra leone',
                'SG' => 'Singapur',
                'SK' => 'Slowakei',
                'SI' => 'Slowenien',
                'ES' => 'Spanien',
                'SH' => 'St. Helena',
                'KN' => 'St. Kitts und Nevis',
                'LC' => 'St. Lucia',
                'PM' => 'St. Pierre und Miguelon',
                'VC' => 'St. Vincient und die Grenadien',
                'ZA' => 'Südafrika',
                'SR' => 'Surinam',
                'SJ' => 'Svalbard und Jan-Mayen-Insel',
                'SZ' => 'Swasiland',
                'TJ' => 'Tadscjikistan',
                'TW' => 'Taiwan',
                'TZ' => 'Tansania',
                'TH' => 'Thailand',
                'TG' => 'Togo',
                'TO' => 'Tonga',
                'TT' => 'Trinidad und Tobago',
                'TD' => 'Tschad',
                'CZ' => 'Tschechische Republik',
                'TN' => 'Tunisien',
                'TR' => 'Türkei',
                'TM' => 'Turkmenistan',
                'TC' => 'Turks und Caicos-Inseln',
                'TV' => 'Tuvalu',
                'UG' => 'Uganda',
                'UA' => 'Ukraine',
                'HU' => 'Ungarn',
                'UY' => 'Uruguay',
                'US' => 'USA',
                'VU' => 'Vanuatu',
                'VA' => 'Vatikanstadt',
                'VE' => 'Venezuela',
                'AE' => 'Vereinigte Arabische Emirate',
                'VN' => 'Vietnam',
                'WF' => 'Wallis und Futuna',
                'CY' => 'Zypern'
                );
    } elseif ($lg == 'fr') {
        $country_codes = array (
                'AF' => 'Afghanistan',
                'ZA' => 'Afrique du Sud',
                'AL' => 'Albanie',
                'DZ' => 'Algérie',
                'DE' => 'Allemagne',
                'AD' => 'Andorre',
                'AO' => 'Angola',
                'AG' => 'Antigua-et-Barbuda',
                'SA' => 'Arabie saoudite',
                'AR' => 'Argentine',
                'AM' => 'Arménie',
                'AU' => 'Australie',
                'AT' => 'Autriche',
                'AZ' => 'Azerbaïdjan',
                'BS' => 'Bahamas',
                'BH' => 'Bahreïn',
                'BD' => 'Bangladesh',
                'BB' => 'Barbade',
                'BE' => 'Belgique',
                'BZ' => 'Bélize',
                'BJ' => 'Bénin',
                'BT' => 'Bhoutan',
                'BY' => 'Bélarus',
                'BO' => 'Bolivie',
                'BA' => 'Bosnie-Herzégovine',
                'BW' => 'Botswana',
                'BR' => 'Brésil',
                'BN' => 'Brunei Darussalam',
                'BG' => 'Bulgarie',
                'BF' => 'Burkina Faso',
                'BI' => 'Burundi',
                'KH' => 'Cambodia',
                'CM' => 'Cameroon',
                'CA' => 'Canada',
                'CV' => 'Cape verde',
                'KY' => 'Cayman islands',
                'CF' => 'Central african republic',
                'TD' => 'Chad',
                'CL' => 'Chile',
                'CN' => 'China',
                'CX' => 'Christmas island',
                'CC' => 'Cocos (keeling) islands',
                'CO' => 'Colombie',
                'KM' => 'Comoros',
                'CD' => 'Congo',
                'CG' => 'Congo',
                'CK' => 'Cook islands',
                'CR' => 'Costa rica',
                'CI' => 'Cote d\'ivoire',
                'HR' => 'Croatia',
                'CU' => 'Cuba',
                'CY' => 'Cyprus',
                'CZ' => 'Czech republic',
                'DK' => 'Denmark',
                'DJ' => 'Djibouti',
                'DM' => 'Dominica',
                'DO' => 'Dominican republic',
                'TP' => 'East timor',
                'EC' => 'Ecuador',
                'EG' => 'Egypt',
                'SV' => 'El salvador',
                'GQ' => 'Equatorial guinea',
                'ER' => 'Eritrea',
                'EE' => 'Estonia',
                'ET' => 'Ethiopia',
                'FK' => 'Falkland islands (malvinas)',
                'FO' => 'Faroe islands',
                'FJ' => 'Fiji',
                'FI' => 'Finland',
                'FR' => 'France',
                'GF' => 'French guiana',
                'PF' => 'French polynesia',
                'TF' => 'French southern territories',
                'GA' => 'Gabon',
                'GM' => 'Gambia',
                'GE' => 'Georgia',
                'GH' => 'Ghana',
                'GI' => 'Gibraltar',
                'GR' => 'Greece',
                'GL' => 'Greenland',
                'GD' => 'Grenada',
                'GP' => 'Guadeloupe',
                'GU' => 'Guam',
                'GT' => 'Guatemala',
                'GN' => 'Guinea',
                'GW' => 'Guinea-bissau',
                'GY' => 'Guyana',
                'HT' => 'Haiti',
                'HM' => 'Heard island and mcdonald islands',
                'VA' => 'Holy see (vatican city state)',
                'HN' => 'Honduras',
                'HK' => 'Hong kong',
                'HU' => 'Hungary',
                'IS' => 'Iceland',
                'IN' => 'India',
                'ID' => 'Indonesia',
                'IR' => 'Iran',
                'IQ' => 'Iraq',
                'IE' => 'Ireland',
                'IL' => 'Israel',
                'IT' => 'Italy',
                'JM' => 'Jamaica',
                'JP' => 'Japan',
                'JO' => 'Jordan',
                'KZ' => 'Kazakstan',
                'KE' => 'Kenya',
                'KI' => 'Kiribati',
                'KP' => 'Korea, democratic people\'s republic of',
                'KR' => 'Korea, republic of',
                'KW' => 'Kuwait',
                'KG' => 'Kyrgyzstan',
                'LA' => 'Lao people\'s democratic republic',
                'LV' => 'Latvia',
                'LB' => 'Lebanon',
                'LS' => 'Lesotho',
                'LR' => 'Liberia',
                'LY' => 'Libyan arab jamahiriya',
                'LI' => 'Liechtenstein',
                'LT' => 'Lithuania',
                'LU' => 'Luxembourg',
                'MO' => 'Macau',
                'MK' => 'Macedonia',
                'MG' => 'Madagascar',
                'MW' => 'Malawi',
                'MY' => 'Malaysia',
                'MV' => 'Maldives',
                'ML' => 'Mali',
                'MT' => 'Malta',
                'MH' => 'Marshall islands',
                'MQ' => 'Martinique',
                'MR' => 'Mauritania',
                'MU' => 'Mauritius',
                'YT' => 'Mayotte',
                'MX' => 'Mexico',
                'FM' => 'Micronesia',
                'MD' => 'Moldova, republic of',
                'MC' => 'Monaco',
                'MN' => 'Mongolia',
                'MS' => 'Montserrat',
                'MA' => 'Morocco',
                'MZ' => 'Mozambique',
                'MM' => 'Myanmar',
                'NA' => 'Namibia',
                'NR' => 'Nauru',
                'NP' => 'Nepal',
                'NL' => 'Netherlands',
                'AN' => 'Netherlands antilles',
                'NC' => 'New caledonia',
                'NZ' => 'New zealand',
                'NI' => 'Nicaragua',
                'NE' => 'Niger',
                'NG' => 'Nigeria',
                'NU' => 'Niue',
                'NF' => 'Norfolk island',
                'MP' => 'Northern mariana islands',
                'NO' => 'Norway',
                'OM' => 'Oman',
                'PK' => 'Pakistan',
                'PW' => 'Palau',
                'PS' => 'Palestinian territory',
                'PA' => 'Panama',
                'PG' => 'Papua new guinea',
                'PY' => 'Paraguay',
                'PE' => 'Peru',
                'PH' => 'Philippines',
                'PN' => 'Pitcairn',
                'PL' => 'Poland',
                'PT' => 'Portugal',
                'PR' => 'Puerto rico',
                'QA' => 'Qatar',
                'RE' => 'Reunion',
                'RO' => 'Romania',
                'RU' => 'Russian federation',
                'RW' => 'Rwanda',
                'SH' => 'Saint helena',
                'KN' => 'Saint kitts and nevis',
                'LC' => 'Saint lucia',
                'PM' => 'Saint pierre and miquelon',
                'VC' => 'Saint vincent and the grenadines',
                'WS' => 'Samoa',
                'SM' => 'San marino',
                'ST' => 'Sao tome and principe',
                'SN' => 'Senegal',
                'SC' => 'Seychelles',
                'SL' => 'Sierra leone',
                'SG' => 'Singapore',
                'SK' => 'Slovakia',
                'SI' => 'Slovenia',
                'SB' => 'Solomon islands',
                'SO' => 'Somalia',
                'GS' => 'South sandwich islands',
                'ES' => 'Spain',
                'LK' => 'Sri lanka',
                'SD' => 'Sudan',
                'SR' => 'Suriname',
                'SJ' => 'Svalbard and jan mayen',
                'SZ' => 'Swaziland',
                'SE' => 'Sweden',
                'CH' => 'Suisse',
                'SY' => 'Syrian arab republic',
                'TW' => 'Taiwan',
                'TJ' => 'Tajikistan',
                'TZ' => 'Tanzania',
                'TH' => 'Thailand',
                'TG' => 'Togo',
                'TK' => 'Tokelau',
                'TO' => 'Tonga',
                'TT' => 'Trinidad and tobago',
                'TN' => 'Tunisia',
                'TR' => 'Turkey',
                'TM' => 'Turkmenistan',
                'TC' => 'Turks and caicos islands',
                'TV' => 'Tuvalu',
                'UG' => 'Uganda',
                'UA' => 'Ukraine',
                'AE' => 'United arab emirates',
                'GB' => 'United kingdom',
                'US' => 'United states',
                'UM' => 'United states minor outlying islands',
                'UY' => 'Uruguay',
                'UZ' => 'Uzbekistan',
                'VU' => 'Vanuatu',
                'VE' => 'Venezuela',
                'VN' => 'Viet nam',
                'VG' => 'Virgin islands, british',
                'VI' => 'Virgin islands, u.s.',
                'WF' => 'Wallis and futuna',
                'EH' => 'Western sahara',
                'YE' => 'Yemen',
                'YU' => 'Yugoslavia',
                'ZM' => 'Zambia',
                'ZW' => 'Zimbabwe',
                );
    } else {
             $country_codes = array (
                'AL' => 'Albania',
                'DZ' => 'Algeria',
                'AS' => 'American samoa',
                'AD' => 'Andorra',
                'AO' => 'Angola',
                'AI' => 'Anguilla',
                'AQ' => 'Antarctica',
                'AG' => 'Antigua and barbuda',
                'AR' => 'Argentina',
                'AM' => 'Armenia',
                'AW' => 'Aruba',
                'AU' => 'Australia',
                'AT' => 'Austria',
                'AZ' => 'Azerbaijan',
                'BS' => 'Bahamas',
                'BH' => 'Bahrain',
                'BD' => 'Bangladesh',
                'BB' => 'Barbados',
                'BY' => 'Belarus',
                'BE' => 'Belgium',
                'BZ' => 'Belize',
                'BJ' => 'Benin',
                'BM' => 'Bermuda',
                'BT' => 'Bhutan',
                'BO' => 'Bolivia',
                'BA' => 'Bosnia and herzegovina',
                'BW' => 'Botswana',
                'BV' => 'Bouvet island',
                'BR' => 'Brazil',
                'IO' => 'British indian ocean territory',
                'BN' => 'Brunei darussalam',
                'BG' => 'Bulgaria',
                'BF' => 'Burkina faso',
                'BI' => 'Burundi',
                'KH' => 'Cambodia',
                'CM' => 'Cameroon',
                'CA' => 'Canada',
                'CV' => 'Cape verde',
                'KY' => 'Cayman islands',
                'CF' => 'Central african republic',
                'TD' => 'Chad',
                'CL' => 'Chile',
                'CN' => 'China',
                'CX' => 'Christmas island',
                'CC' => 'Cocos (keeling) islands',
                'CO' => 'Colombia',
                'KM' => 'Comoros',
                'CD' => 'Congo',
                'CG' => 'Congo',
                'CK' => 'Cook islands',
                'CR' => 'Costa rica',
                'CI' => 'Cote d\'ivoire',
                'HR' => 'Croatia',
                'CU' => 'Cuba',
                'CY' => 'Cyprus',
                'CZ' => 'Czech republic',
                'DK' => 'Denmark',
                'DJ' => 'Djibouti',
                'DM' => 'Dominica',
                'DO' => 'Dominican republic',
                'TP' => 'East timor',
                'EC' => 'Ecuador',
                'EG' => 'Egypt',
                'SV' => 'El salvador',
                'GQ' => 'Equatorial guinea',
                'ER' => 'Eritrea',
                'EE' => 'Estonia',
                'ET' => 'Ethiopia',
                'FK' => 'Falkland islands (malvinas)',
                'FO' => 'Faroe islands',
                'FJ' => 'Fiji',
                'FI' => 'Finland',
                'FR' => 'France',
                'GF' => 'French guiana',
                'PF' => 'French polynesia',
                'TF' => 'French southern territories',
                'GA' => 'Gabon',
                'GM' => 'Gambia',
                'GE' => 'Georgia',
                'DE' => 'Germany',
                'GH' => 'Ghana',
                'GI' => 'Gibraltar',
                'GR' => 'Greece',
                'GL' => 'Greenland',
                'GD' => 'Grenada',
                'GP' => 'Guadeloupe',
                'GU' => 'Guam',
                'GT' => 'Guatemala',
                'GN' => 'Guinea',
                'GW' => 'Guinea-bissau',
                'GY' => 'Guyana',
                'HT' => 'Haiti',
                'HM' => 'Heard island and mcdonald islands',
                'VA' => 'Holy see (vatican city state)',
                'HN' => 'Honduras',
                'HK' => 'Hong kong',
                'HU' => 'Hungary',
                'IS' => 'Iceland',
                'IN' => 'India',
                'ID' => 'Indonesia',
                'IR' => 'Iran',
                'IQ' => 'Iraq',
                'IE' => 'Ireland',
                'IL' => 'Israel',
                'IT' => 'Italy',
                'JM' => 'Jamaica',
                'JP' => 'Japan',
                'JO' => 'Jordan',
                'KZ' => 'Kazakstan',
                'KE' => 'Kenya',
                'KI' => 'Kiribati',
                'KP' => 'Korea, democratic people\'s republic of',
                'KR' => 'Korea, republic of',
                'KW' => 'Kuwait',
                'KG' => 'Kyrgyzstan',
                'LA' => 'Lao people\'s democratic republic',
                'LV' => 'Latvia',
                'LB' => 'Lebanon',
                'LS' => 'Lesotho',
                'LR' => 'Liberia',
                'LY' => 'Libyan arab jamahiriya',
                'LI' => 'Liechtenstein',
                'LT' => 'Lithuania',
                'LU' => 'Luxembourg',
                'MO' => 'Macau',
                'MK' => 'Macedonia',
                'MG' => 'Madagascar',
                'MW' => 'Malawi',
                'MY' => 'Malaysia',
                'MV' => 'Maldives',
                'ML' => 'Mali',
                'MT' => 'Malta',
                'MH' => 'Marshall islands',
                'MQ' => 'Martinique',
                'MR' => 'Mauritania',
                'MU' => 'Mauritius',
                'YT' => 'Mayotte',
                'MX' => 'Mexico',
                'FM' => 'Micronesia',
                'MD' => 'Moldova, republic of',
                'MC' => 'Monaco',
                'MN' => 'Mongolia',
                'MS' => 'Montserrat',
                'MA' => 'Morocco',
                'MZ' => 'Mozambique',
                'MM' => 'Myanmar',
                'NA' => 'Namibia',
                'NR' => 'Nauru',
                'NP' => 'Nepal',
                'NL' => 'Netherlands',
                'AN' => 'Netherlands antilles',
                'NC' => 'New caledonia',
                'NZ' => 'New zealand',
                'NI' => 'Nicaragua',
                'NE' => 'Niger',
                'NG' => 'Nigeria',
                'NU' => 'Niue',
                'NF' => 'Norfolk island',
                'MP' => 'Northern mariana islands',
                'NO' => 'Norway',
                'OM' => 'Oman',
                'PK' => 'Pakistan',
                'PW' => 'Palau',
                'PS' => 'Palestinian territory',
                'PA' => 'Panama',
                'PG' => 'Papua new guinea',
                'PY' => 'Paraguay',
                'PE' => 'Peru',
                'PH' => 'Philippines',
                'PN' => 'Pitcairn',
                'PL' => 'Poland',
                'PT' => 'Portugal',
                'PR' => 'Puerto rico',
                'QA' => 'Qatar',
                'RE' => 'Reunion',
                'RO' => 'Romania',
                'RU' => 'Russian federation',
                'RW' => 'Rwanda',
                'SH' => 'Saint helena',
                'KN' => 'Saint kitts and nevis',
                'LC' => 'Saint lucia',
                'PM' => 'Saint pierre and miquelon',
                'VC' => 'Saint vincent and the grenadines',
                'WS' => 'Samoa',
                'SM' => 'San marino',
                'ST' => 'Sao tome and principe',
                'SA' => 'Saudi arabia',
                'SN' => 'Senegal',
                'SC' => 'Seychelles',
                'SL' => 'Sierra leone',
                'SG' => 'Singapore',
                'SK' => 'Slovakia',
                'SI' => 'Slovenia',
                'SB' => 'Solomon islands',
                'SO' => 'Somalia',
                'ZA' => 'South africa',
                'GS' => 'South sandwich islands',
                'ES' => 'Spain',
                'LK' => 'Sri lanka',
                'SD' => 'Sudan',
                'SR' => 'Suriname',
                'SJ' => 'Svalbard and jan mayen',
                'SZ' => 'Swaziland',
                'SE' => 'Sweden',
                'CH' => 'Switzerland',
                'SY' => 'Syrian arab republic',
                'TW' => 'Taiwan',
                'TJ' => 'Tajikistan',
                'TZ' => 'Tanzania',
                'TH' => 'Thailand',
                'TG' => 'Togo',
                'TK' => 'Tokelau',
                'TO' => 'Tonga',
                'TT' => 'Trinidad and tobago',
                'TN' => 'Tunisia',
                'TR' => 'Turkey',
                'TM' => 'Turkmenistan',
                'TC' => 'Turks and caicos islands',
                'TV' => 'Tuvalu',
                'UG' => 'Uganda',
                'UA' => 'Ukraine',
                'AE' => 'United arab emirates',
                'GB' => 'United kingdom',
                'US' => 'United states',
                'UM' => 'United states minor outlying islands',
                'UY' => 'Uruguay',
                'UZ' => 'Uzbekistan',
                'VU' => 'Vanuatu',
                'VE' => 'Venezuela',
                'VN' => 'Viet nam',
                'VG' => 'Virgin islands, british',
                'VI' => 'Virgin islands, u.s.',
                'WF' => 'Wallis and futuna',
                'EH' => 'Western sahara',
                'YE' => 'Yemen',
                'YU' => 'Yugoslavia',
                'ZM' => 'Zambia',
                'ZW' => 'Zimbabwe',
                );
    }

    if(isset($country_codes[$selected])) {
        $params["selected"] = $selected;
    }
    
    $preset = get($params, 'preset');
    if (isset($country_codes[$preset])) {
        $country_codes = array_merge(
            array($preset => $country_codes[$preset]),
            $country_codes
        );
    }
   
    $params["options"] = $country_codes;
    
    return smarty_function_html_options($params, $smarty);
}
